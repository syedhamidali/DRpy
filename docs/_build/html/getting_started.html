

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Getting Started &#8212; DRpy</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'getting_started';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Advanced Plotting" href="advanced_plotting.html" />
    <link rel="prev" title="Installation" href="installation.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    <p class="title logo__title">DRpy</p>
  
</a></div>
    
  </div>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="installation.html">
                        Installation
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        Getting Started
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="advanced_plotting.html">
                        Advanced Plotting
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="example_gallery.html">
                        Example Gallery
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="installation.html">
                        Installation
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        Getting Started
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="advanced_plotting.html">
                        Advanced Plotting
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="example_gallery.html">
                        Example Gallery
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Breadcrumb">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">Getting Started</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this heading">#</a></h1>
<p>The main functionality of DRpy has 3 main topics:</p>
<ol class="arabic simple">
<li><p>Download GPM-DPR Data</p></li>
<li><p>Read GPM-DPR</p></li>
<li><p>Plot GPM-DPR data</p></li>
</ol>
<section id="download-data">
<h2>1. Download Data<a class="headerlink" href="#download-data" title="Permalink to this heading">#</a></h2>
<p>One of the major hurtles to using GPM-DPR data is downloading the data. Before you can do anything you have to go
sign up to access the data server here: <a class="reference external" href="https://registration.pps.eosdis.nasa.gov/registration/">PPS Registration</a>.
Signing up is free. The purpose of it is to keep statistics of the people using the data. This is usually used at
NASA headquarter meetings to show how valuable the GPM-DPR data are and keep the mission funded. So please go sign up.
You also get helpful emails occasionally about data issues or satellite issues.</p>
<p>Once you have signed up, you can access the ftps pages through your browser by entering the email you signed up with
as the username and the password. There are two ftp pages for GPM-DPR data:</p>
<ol class="arabic simple">
<li><p>Near real time (~ 1-2 hour delay) <a class="reference external" href="https://jsimpsonhttps.pps.eosdis.nasa.gov/radar/">jsimpsonhttps.pps.eosdis.nasa.gov</a></p></li>
<li><p>Research (~ 24 hour delay). <a class="reference external" href="https://arthurhouhttps.pps.eosdis.nasa.gov/gpmdata/">arthurhouhttps.pps.eosdis.nasa.gov</a></p></li>
</ol>
<p>The purpose of the two servers is to give users both a low latency option with a larger risk of the data errors and a
day late high-quality research product. Side note, both are named after pioneers for the TRMM (<a class="reference external" href="https://en.wikipedia.org/wiki/Joanne_Simpson">Dr. Joanne Simpson</a>)
and GPM (<a class="reference external" href="https://gpm.nasa.gov/resources/remembering-dr-arthur-y-hou-1947-2013">Dr. Arthur Hou</a>) missions.</p>
<p>If you navigate to either of these servers, you will see a bunch of files with filenames that seem intially like incoherent non-sense.
Thus the first main perk of <code class="docutils literal notranslate"><span class="pre">DRpy</span></code> is the ability to find and download a file based on the time the data were collected.
In the future, a planned functionality of <code class="docutils literal notranslate"><span class="pre">DRpy</span></code> will be able to go and grab all files that span a time range, but right now it only
supports 1 file at a time [which is used for case study plots].</p>
<section id="finding-the-time">
<h3>Finding the time<a class="headerlink" href="#finding-the-time" title="Permalink to this heading">#</a></h3>
<a class="reference internal image-reference" href="_images/GPMRealTimeMonitor.png"><img alt="_images/GPMRealTimeMonitor.png" class="align-center" src="_images/GPMRealTimeMonitor.png" style="width: 600px;" /></a>
<p>The quickest method find a time and place of interesting data is to use JAXA’s near-realtime website: <a class="reference external" href="https://sharaku.eorc.jaxa.jp/trmm/RT3/index.html">GPM RealTime Monitor</a>
This site is amazing and provides a map of the near-surface rain rate from the GPM-DPR retrieval.</p>
<p>Below is a .gif of me doing just that. Find a place that looks interesting, and turn on the “Observation Time”
toggle to locate a time and place you want to download.</p>
<a class="reference internal image-reference" href="_images/findtime.gif"><img alt="_images/findtime.gif" class="align-center" src="_images/findtime.gif" style="width: 600px;" /></a>
<p>This website has the near-surface rain rate for ALL of the data. So feel free to select a different day. I usually select
a date from the dropdowns rather than using the prev. next buttons because those can freeze up.</p>
<p>Now that we have located a time of interest, lets actually use <code class="docutils literal notranslate"><span class="pre">DRpy</span></code>. That brings us to the <code class="docutils literal notranslate"><span class="pre">io</span></code> module of <code class="docutils literal notranslate"><span class="pre">DRpy</span></code>.
This module is tasked with scraping the text files off of the ftps servers and allowing us to grab the 1 file that matches
the time we want.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">drpy</span>
<span class="n">dtime</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s1">&#39;2022/02/20 00:54:00&#39;</span><span class="p">)</span>

<span class="n">io</span> <span class="o">=</span> <span class="n">drpy</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">netrunner</span><span class="p">(</span><span class="n">servername</span><span class="o">=</span><span class="s1">&#39;Research&#39;</span><span class="p">,</span><span class="n">username</span><span class="o">=</span><span class="s1">&#39;username@email.com&#39;</span><span class="p">,</span><span class="n">start_time</span><span class="o">=</span><span class="n">dtime</span><span class="p">)</span>
</pre></div>
</div>
<p>Once you run that code, it will print out the file it is downloading, like this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Downloading: https://arthurhouhttps.pps.eosdis.nasa.gov/text/gpmdata/2022/02/20/radar/2A.GPM.DPR.V9-20211125.20220220-S003549-E020820.045337.V07A.HDF5</span>
</pre></div>
</div>
<p>Note that sometimes the early day files (0000 - 0100) can end up in the previous days folder.
Right now I do not have it coded to search the previous day’s dir, so please just adjust your date to one day prior for now.</p>
</section>
</section>
<section id="read-gpm-dpr-data">
<h2>2. Read GPM-DPR Data<a class="headerlink" href="#read-gpm-dpr-data" title="Permalink to this heading">#</a></h2>
<p>Now that you have some DPR files, here is an example of how to load them with <code class="docutils literal notranslate"><span class="pre">DRpy</span></code>. We will use
the core method of GPMDPR. All you need to supply is the filename/path of the file of interest and it
will (lazily) load ALL modules of the hdf into an xarray dataset. It stores this data in <code class="docutils literal notranslate"><span class="pre">dpr.ds</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dpr</span> <span class="o">=</span> <span class="n">drpy</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">GPMDPR</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">io</span><span class="o">.</span><span class="n">filename</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="mi">64</span><span class="p">:])</span>
<span class="n">dpr</span><span class="o">.</span><span class="n">ds</span>
</pre></div>
</div>
<p>if you are using Jupyter to do this, you might see something like this</p>
<a class="reference internal image-reference" href="_images/dataset_snap.png"><img alt="_images/dataset_snap.png" class="align-center" src="_images/dataset_snap.png" style="width: 600px;" /></a>
<p>All 96 variables here are from the original hdf file. If you need more information on what each one of the variables are, please
see the File Specificatiom (<a class="reference external" href="https://www.eorc.jaxa.jp/GPM/doc/product/format/en/03.GPM_DPR_L2_L3_Product_Format_Documentation_V7_E.pdf">Iguchi et al. 2021a</a>).
I know that this document is quite dense, so the easiest thing is probably to ctrl+f the document and search the variable you are
curious about. In future versions of the docs, I will have more examples plotting various variables in this file.</p>
<p>If you are interested in the science behind any one variable, see the Algorithm Theoretical Basis Document (ATBD, <a class="reference external" href="https://www.eorc.jaxa.jp/GPM/doc/algorithm/ATBD_DPR_V07A.pdf">Iguchi et al. 2021b</a>).</p>
</section>
<section id="plot-gpm-dpr-data">
<h2>3. Plot GPM-DPR Data<a class="headerlink" href="#plot-gpm-dpr-data" title="Permalink to this heading">#</a></h2>
<a class="reference internal image-reference" href="_images/DRpy_case_example.png"><img alt="_images/DRpy_case_example.png" class="align-center" src="_images/DRpy_case_example.png" style="width: 600px;" /></a>
<p>As part of <code class="docutils literal notranslate"><span class="pre">DRpy</span></code> I have made a fun tool that makes case study plots like the one above. To make this graph you
need to use the graph module called <code class="docutils literal notranslate"><span class="pre">drpy.graph.case_study()</span></code>. The <code class="docutils literal notranslate"><span class="pre">.case_study</span></code> method takes the filename
and the center lat/lon of the map you want to show on the right. The easiest way is to copy the lat and lon
values from the same waypoint of the near-real-time site where you got the time. Here is an example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">center_lat</span> <span class="o">=</span> <span class="o">-</span><span class="mf">17.489</span>
<span class="n">center_lon</span> <span class="o">=</span> <span class="mf">56.181</span>
<span class="n">c</span>  <span class="o">=</span> <span class="n">drpy</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">case_study</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">io</span><span class="o">.</span><span class="n">filename</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="mi">64</span><span class="p">:],</span><span class="n">center_lat</span><span class="o">=</span><span class="n">center_lat</span><span class="p">,</span><span class="n">center_lon</span><span class="o">=</span><span class="n">center_lon</span><span class="p">)</span>
</pre></div>
</div>
<p>Now that the case_study object is made, you can plot it up using the default parameters like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">c</span><span class="o">.</span><span class="n">plotter_along</span><span class="p">()</span>
</pre></div>
</div>
<p>The resulting image will look like this:</p>
<a class="reference internal image-reference" href="_images/DRpy_default.png"><img alt="_images/DRpy_default.png" class="align-center" src="_images/DRpy_default.png" style="width: 600px;" /></a>
<p>There is added functionality to this case_study method, but this is the getting started docs page. In the future there will be
additional docs pages to help change the default plot.</p>
</section>
</section>


                </article>
              
              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="installation.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Installation</p>
      </div>
    </a>
    <a class="right-next"
       href="advanced_plotting.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Advanced Plotting</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#download-data">1. Download Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#finding-the-time">Finding the time</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#read-gpm-dpr-data">2. Read GPM-DPR Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-gpm-dpr-data">3. Plot GPM-DPR Data</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div class="tocsection sourcelink">
    <a href="_sources/getting_started.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  <p class="copyright">
    
      © Copyright 2022, Randy Chase.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">
  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.0.2.
    <br/>
  </p>
</div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.13.3.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>